env.BASE_DIR = "$WORK/chapter2"

process {
   executor = 'nqsii'
   queue = 'clmedium'
   cpus = 1
   memory = 4.GB
   time = { 1.h * task.attempt }
   errorStrategy = { task.exitStatus == Integer.MAX_VALUE ? 'retry' : 'finish' }
   maxRetries = 1
   maxErrors = '-1'

   $split_samples {
      memory = 20.GB
      time = { 4.h * task.attempt }
   }

   $mark_adapters {
      memory = 20.GB
      time = { 15.h * task.attempt }
   }

   $map_and_merge {
      cpus = 8
      memory = 50.GB
      time = { 20.h * task.attempt }
   }

   $mark_duplicates {
      queue = 'cllong'
      memory =  32.GB
      time = { 30.h * task.attempt }
   }

   }

trace { enabled = true }
report { enabled = true }